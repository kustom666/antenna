/*
 * HTML5 Forms Chapter JavaScript Library
 * http://thecssninja.com/javascript/H5F
 *
 * Copyright (c) 2010 Ryan Seddon - http://thecssninja.com/
 * Dual-licensed under the BSD and MIT licenses.
 * http://thecssninja.com/H5F/license.txt
 */
var H5F=H5F||{};(function(e){var t,i,a,s=e.createElement("input"),n=new RegExp("^[a-z0-9_.%+-]+@[0-9a-z.-]+\\.[a-z.]{2,6}$","i"),l=new RegExp("[a-z][-.+a-z]*://","i"),r=new RegExp("^(input|select|textarea)$","i"),u="";H5F.setup=function(e,t){var i=!e.nodeType||!1,s={validClass:"valid",invalidClass:"error",requiredClass:"required",placeholderClass:"placeholder"};if("object"==typeof t)for(var n in s)"undefined"==typeof t[n]&&(t[n]=s[n]);if(a=t||s,i)for(var l=0,r=e.length;r>l;l++)H5F.validation(e[l]);else H5F.validation(e)},H5F.validation=function(e){var t,i=e.elements,a=i.length;if(H5F.listen(e,"invalid",H5F.checkField,!0),H5F.listen(e,"blur",H5F.checkField,!0),H5F.listen(e,"input",H5F.checkField,!0),H5F.listen(e,"keyup",H5F.checkField,!0),H5F.listen(e,"focus",H5F.checkField,!0),!H5F.support())for(e.checkValidity=function(){return H5F.checkValidity(e)};a--;)t=!!i[a].attributes.required,"FIELDSET"!==i[a].nodeName&&H5F.validity(i[a])},H5F.validity=function(e){var t=e,a=H5F.valueMissing(t),s=t.getAttribute("type"),n=t.getAttribute("pattern"),l=t.getAttribute("placeholder"),r=/^(email|url)$/i,o=/^(input|keyup)$/i,d=r.test(s)?s:n?n:!1,c=H5F.pattern(t,d),v=H5F.range(t,"step"),F=H5F.range(t,"min"),H=H5F.range(t,"max"),p=""!==u;t.checkValidity=function(){return H5F.checkValidity(t)},t.setCustomValidity=function(e){H5F.setCustomValidity.call(t,e)},t.validationMessage=u,t.validity={valueMissing:a,patternMismatch:c,rangeUnderflow:F,rangeOverflow:H,stepMismatch:v,customError:p,valid:!(a||c||v||F||H||p)},l&&!o.test(i)&&H5F.placeholder(t)},H5F.checkField=function(e){var t=H5F.getTarget(e)||e,s=/^(input|keyup|focusin|focus)$/i,n=/^(submit|image|button|reset)$/i,l=!0;!r.test(t.nodeName)||n.test(t.type)||n.test(t.nodeName)||(i=e.type,H5F.support()||H5F.validity(t),t.validity.valid?(H5F.removeClass(t,[a.invalidClass,a.requiredClass]),H5F.addClass(t,a.validClass)):s.test(i)?t.validity.valueMissing&&H5F.removeClass(t,[a.requiredClass,a.invalidClass,a.validClass]):t.validity.valueMissing?(H5F.removeClass(t,[a.invalidClass,a.validClass]),H5F.addClass(t,a.requiredClass)):(H5F.removeClass(t,[a.validClass,a.requiredClass]),H5F.addClass(t,a.invalidClass)),"input"===i&&l&&(H5F.unlisten(t.form,"keyup",H5F.checkField,!0),l=!1))},H5F.checkValidity=function(e){var t,i,a,s,n=!1;if("FORM"===e.nodeName){t=e.elements;for(var l=0,r=t.length;r>l;l++)i=t[l],a=!!i.attributes.required,s=!!i.attributes.pattern,"FIELDSET"!==i.nodeName&&(a||s)&&(H5F.checkField(i),i.validity.valid||n||(i.focus(),n=!0));return!n}return H5F.checkField(e),e.validity.valid},H5F.setCustomValidity=function(e){var t=this;u=e,t.validationMessage=u},H5F.support=function(){return H5F.isHostMethod(s,"validity")&&H5F.isHostMethod(s,"checkValidity")},H5F.pattern=function(e,i){if("email"===i)return!n.test(e.value);if("url"===i)return!l.test(e.value);if(i){var a=e.getAttribute("placeholder"),s=e.value;return t=new RegExp("^(?:"+i+")$"),s===a?!0:""===s?!1:!t.test(e.value)}return!1},H5F.placeholder=function(e){var t=e.getAttribute("placeholder"),n=/^(focus|focusin|submit)$/i,l=/^(input|textarea)$/i,r=/^password$/i,u=!!("placeholder"in s);u||!l.test(e.nodeName)||r.test(e.type)||(""!==e.value||n.test(i)?e.value===t&&n.test(i)&&(e.value="",H5F.removeClass(e,a.placeholderClass)):(e.value=t,H5F.listen(e.form,"submit",function(){i="submit",H5F.placeholder(e)},!0),H5F.addClass(e,a.placeholderClass)))},H5F.range=function(e,t){var i=parseInt(e.getAttribute("min"),10)||0,a=parseInt(e.getAttribute("max"),10)||!1,s=parseInt(e.getAttribute("step"),10)||1,n=parseInt(e.value,10),l=(n-i)%s;return H5F.valueMissing(e)||isNaN(n)?"number"===e.getAttribute("type")?!0:!1:"step"===t?e.getAttribute("step")?0!==l:!1:"min"===t?e.getAttribute("min")?i>n:!1:"max"===t?e.getAttribute("max")?n>a:!1:void 0},H5F.required=function(e){var t=!!e.attributes.required;return t?H5F.valueMissing(e):!1},H5F.valueMissing=function(e){var t=e.getAttribute("placeholder"),i=!!e.attributes.required;return!(!i||""!==e.value&&e.value!==t)},H5F.listen=function(e,t,i,a){H5F.isHostMethod(window,"addEventListener")?e.addEventListener(t,i,a):H5F.isHostMethod(window,"attachEvent")&&"undefined"!=typeof window.event&&("blur"===t?t="focusout":"focus"===t&&(t="focusin"),e.attachEvent("on"+t,i))},H5F.unlisten=function(e,t,i,a){H5F.isHostMethod(window,"removeEventListener")?e.removeEventListener(t,i,a):H5F.isHostMethod(window,"detachEvent")&&"undefined"!=typeof window.event&&e.detachEvent("on"+t,i)},H5F.preventActions=function(e){e=e||window.event,e.stopPropagation&&e.preventDefault?(e.stopPropagation(),e.preventDefault()):(e.cancelBubble=!0,e.returnValue=!1)},H5F.getTarget=function(e){return e=e||window.event,e.target||e.srcElement},H5F.addClass=function(e,t){var i;e.className?(i=new RegExp("(^|\\s)"+t+"(\\s|$)"),i.test(e.className)||(e.className+=" "+t)):e.className=t},H5F.removeClass=function(e,t){var i,a,s="object"==typeof t?t.length:1,n=s;if(e.className)if(e.className==t)e.className="";else for(;s--;)i=new RegExp("(^|\\s)"+(n>1?t[s]:t)+"(\\s|$)"),a=e.className.match(i),a&&3==a.length&&(e.className=e.className.replace(i,a[1]&&a[2]?" ":""))},H5F.isHostMethod=function(e,t){var i=typeof e[t],a=new RegExp("^function|object$","i");return!!(a.test(i)&&e[t]||"unknown"==i)}})(document);