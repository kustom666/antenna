(function(){function e(){this.returnValue=!1}function t(){this.cancelBubble=!0}var n,i,r=0,a=[],o={},s={},u={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},l=/[<>&\"\']/g,f=window.setTimeout,c={};(function(e){var t,n,i,r=e.split(/,/);for(t=0;r.length>t;t+=2)for(i=r[t+1].split(/ /),n=0;i.length>n;n++)s[i[n]]=r[t]})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats,docx pptx xlsx,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/html,htm html xhtml,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/vnd.rn-realvideo,rv,text/csv,csv,text/plain,asc txt text diff log,application/octet-stream,exe");var p={VERSION:"1.5.1.1",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:s,ua:function(){var e,t,n,i=navigator,r=i.userAgent,a=i.vendor;return e=/WebKit/.test(r),n=e&&-1!==a.indexOf("Apple"),t=window.opera&&window.opera.buildNumber,{windows:-1!==navigator.platform.indexOf("Win"),ie:!e&&!t&&/MSIE/gi.test(r)&&/Explorer/gi.test(i.appName),webkit:e,gecko:!e&&/Gecko/.test(r),safari:n,opera:!!t}}(),extend:function(e){return p.each(arguments,function(t,n){n>0&&p.each(t,function(t,n){e[n]=t})}),e},cleanName:function(e){var t,n;for(n=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],t=0;n.length>t;t+=2)e=e.replace(n[t],n[t+1]);return e=e.replace(/\s+/g,"_"),e=e.replace(/[^a-z0-9_\-\.]+/gi,"")},addRuntime:function(e,t){return t.name=e,a[e]=t,a.push(t),t},guid:function(){var e,t=(new Date).getTime().toString(32);for(e=0;5>e;e++)t+=Math.floor(65535*Math.random()).toString(32);return(p.guidPrefix||"p")+t+(r++).toString(32)},buildUrl:function(e,t){var n="";return p.each(t,function(e,t){n+=(n?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(e)}),n&&(e+=(e.indexOf("?")>0?"&":"?")+n),e},each:function(e,t){var i,r,a;if(e)if(i=e.length,i===n){for(r in e)if(e.hasOwnProperty(r)&&t(e[r],r)===!1)return}else for(a=0;i>a;a++)if(t(e[a],a)===!1)return},formatSize:function(e){return e===n||/\D/.test(e)?p.translate("N/A"):e>1073741824?Math.round(e/1073741824,1)+" GB":e>1048576?Math.round(e/1048576,1)+" MB":e>1024?Math.round(e/1024,1)+" KB":e+" b"},getPos:function(e,t){function n(e){var t,n,i=0,r=0;return e&&(n=e.getBoundingClientRect(),t="CSS1Compat"===u.compatMode?u.documentElement:u.body,i=n.left+t.scrollLeft,r=n.top+t.scrollTop),{x:i,y:r}}var i,r,a,o=0,s=0,u=document;if(e=e,t=t||u.body,e&&e.getBoundingClientRect&&navigator.userAgent.indexOf("MSIE")>0&&8!==u.documentMode)return r=n(e),a=n(t),{x:r.x-a.x,y:r.y-a.y};for(i=e;i&&i!=t&&i.nodeType;)o+=i.offsetLeft||0,s+=i.offsetTop||0,i=i.offsetParent;for(i=e.parentNode;i&&i!=t&&i.nodeType;)o-=i.scrollLeft||0,s-=i.scrollTop||0,i=i.parentNode;return{x:o,y:s}},getSize:function(e){return{w:e.offsetWidth||e.clientWidth,h:e.offsetHeight||e.clientHeight}},parseSize:function(e){var t;return"string"==typeof e&&(e=/^([0-9]+)([mgk]?)$/.exec(e.toLowerCase().replace(/[^0-9mkg]/g,"")),t=e[2],e=+e[1],"g"==t&&(e*=1073741824),"m"==t&&(e*=1048576),"k"==t&&(e*=1024)),e},xmlEncode:function(e){return e?(""+e).replace(l,function(e){return u[e]?"&"+u[e]+";":e}):e},toArray:function(e){var t,n=[];for(t=0;e.length>t;t++)n[t]=e[t];return n},addI18n:function(e){return p.extend(o,e)},translate:function(e){return o[e]||e},isEmptyObj:function(e){if(e===n)return!0;for(var t in e)return!1;return!0},hasClass:function(e,t){var n;return""==e.className?!1:(n=new RegExp("(^|\\s+)"+t+"(\\s+|$)"),n.test(e.className))},addClass:function(e,t){p.hasClass(e,t)||(e.className=""==e.className?t:e.className.replace(/\s+$/,"")+" "+t)},removeClass:function(e,t){var n=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e.className=e.className.replace(n,function(e,t,n){return" "===t&&" "===n?" ":""})},getStyle:function(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null)[t]:void 0},addEvent:function(r,a,o){var s,u,l;l=arguments[3],a=a.toLowerCase(),i===n&&(i="Plupload_"+p.guid()),r.addEventListener?(s=o,r.addEventListener(a,s,!1)):r.attachEvent&&(s=function(){var n=window.event;n.target||(n.target=n.srcElement),n.preventDefault=e,n.stopPropagation=t,o(n)},r.attachEvent("on"+a,s)),r[i]===n&&(r[i]=p.guid()),c.hasOwnProperty(r[i])||(c[r[i]]={}),u=c[r[i]],u.hasOwnProperty(a)||(u[a]=[]),u[a].push({func:s,orig:o,key:l})},removeEvent:function(e,t){var r,a,o;if("function"==typeof arguments[2]?a=arguments[2]:o=arguments[2],t=t.toLowerCase(),e[i]&&c[e[i]]&&c[e[i]][t]){r=c[e[i]][t];for(var s=r.length-1;s>=0&&(r[s].key!==o&&r[s].orig!==a||(e.detachEvent?e.detachEvent("on"+t,r[s].func):e.removeEventListener&&e.removeEventListener(t,r[s].func,!1),r[s].orig=null,r[s].func=null,r.splice(s,1),a===n));s--);if(r.length||delete c[e[i]][t],p.isEmptyObj(c[e[i]])){delete c[e[i]];try{delete e[i]}catch(u){e[i]=n}}}},removeAllEvents:function(e){var t=arguments[1];e[i]!==n&&e[i]&&p.each(c[e[i]],function(n,i){p.removeEvent(e,i,t)})}};p.Uploader=function(e){function t(){var e,t,n=0;if(this.state==p.STARTED){for(t=0;u.length>t;t++)e||u[t].status!=p.QUEUED?n++:(e=u[t],e.status=p.UPLOADING,this.trigger("BeforeUpload",e)&&this.trigger("UploadFile",e));n==u.length&&(this.stop(),this.trigger("UploadComplete",u))}}function i(){var e,t;for(r.reset(),e=0;u.length>e;e++)t=u[e],t.size!==n?(r.size+=t.size,r.loaded+=t.loaded):r.size=n,t.status==p.DONE?r.uploaded++:t.status==p.FAILED?r.failed++:r.queued++;r.size===n?r.percent=u.length>0?Math.ceil(100*(r.uploaded/u.length)):0:(r.bytesPerSec=Math.ceil(r.loaded/((+new Date-o||1)/1e3)),r.percent=r.size>0?Math.ceil(100*(r.loaded/r.size)):0)}var r,o,s={},u=[];r=new p.QueueProgress,e=p.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},e),p.extend(this,{state:p.STOPPED,runtime:"",features:{},files:u,settings:e,total:r,id:p.guid(),init:function(){function r(){var e,t,n,i=l[d++];if(i){if(e=i.getFeatures(),t=g.settings.required_features)for(t=t.split(","),n=0;t.length>n;n++)if(!e[t[n]])return r(),void 0;i.init(g,function(t){t&&t.success?(g.features=e,g.runtime=i.name,g.trigger("Init",{runtime:i.name}),g.trigger("PostInit"),g.refresh()):r()})}else g.trigger("Error",{code:p.INIT_ERROR,message:p.translate("Init error.")})}var s,l,c,g=this,d=0;if("function"==typeof e.preinit?e.preinit(g):p.each(e.preinit,function(e,t){g.bind(t,e)}),e.page_url=e.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/"),/^(\w+:\/\/|\/)/.test(e.url)||(e.url=e.page_url+e.url),e.chunk_size=p.parseSize(e.chunk_size),e.max_file_size=p.parseSize(e.max_file_size),g.bind("FilesAdded",function(t,i){var r,a,o,s=0,l=e.filters;for(l&&l.length&&(o=[],p.each(l,function(e){p.each(e.extensions.split(/,/),function(e){/^\s*\*\s*$/.test(e)?o.push("\\.*"):o.push("\\."+e.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),o=new RegExp(o.join("|")+"$","i")),r=0;i.length>r;r++)a=i[r],a.loaded=0,a.percent=0,a.status=p.QUEUED,!o||o.test(a.name)?a.size!==n&&a.size>e.max_file_size?t.trigger("Error",{code:p.FILE_SIZE_ERROR,message:p.translate("File size error."),file:a}):(u.push(a),s++):t.trigger("Error",{code:p.FILE_EXTENSION_ERROR,message:p.translate("File extension error."),file:a});return s?(f(function(){g.trigger("QueueChanged"),g.refresh()},1),void 0):!1}),e.unique_names&&g.bind("UploadFile",function(e,t){var n=t.name.match(/\.([^.]+)$/),i="tmp";n&&(i=n[1]),t.target_name=t.id+"."+i}),g.bind("UploadProgress",function(e,t){t.percent=t.size>0?Math.ceil(100*(t.loaded/t.size)):100,i()}),g.bind("StateChanged",function(e){if(e.state==p.STARTED)o=+new Date;else if(e.state==p.STOPPED)for(s=e.files.length-1;s>=0;s--)e.files[s].status==p.UPLOADING&&(e.files[s].status=p.QUEUED,i())}),g.bind("QueueChanged",i),g.bind("Error",function(e,n){n.file&&(n.file.status=p.FAILED,i(),e.state==p.STARTED&&f(function(){t.call(g)},1))}),g.bind("FileUploaded",function(e,n){n.status=p.DONE,n.loaded=n.size,e.trigger("UploadProgress",n),f(function(){t.call(g)},1)}),e.runtimes)for(l=[],c=e.runtimes.split(/\s?,\s?/),s=0;c.length>s;s++)a[c[s]]&&l.push(a[c[s]]);else l=a;r(),"function"==typeof e.init?e.init(g):p.each(e.init,function(e,t){g.bind(t,e)})},refresh:function(){this.trigger("Refresh")},start:function(){this.state!=p.STARTED&&(this.state=p.STARTED,this.trigger("StateChanged"),t.call(this))},stop:function(){this.state!=p.STOPPED&&(this.state=p.STOPPED,this.trigger("StateChanged"))},getFile:function(e){var t;for(t=u.length-1;t>=0;t--)if(u[t].id===e)return u[t]},removeFile:function(e){var t;for(t=u.length-1;t>=0;t--)if(u[t].id===e.id)return this.splice(t,1)[0]},splice:function(e,t){var i;return i=u.splice(e===n?0:e,t===n?u.length:t),this.trigger("FilesRemoved",i),this.trigger("QueueChanged"),i},trigger:function(e){var t,n,i=s[e.toLowerCase()];if(i)for(n=Array.prototype.slice.call(arguments),n[0]=this,t=0;i.length>t;t++)if(i[t].func.apply(i[t].scope,n)===!1)return!1;return!0},hasEventListener:function(e){return!!s[e.toLowerCase()]},bind:function(e,t,n){var i;e=e.toLowerCase(),i=s[e]||[],i.push({func:t,scope:n||this}),s[e]=i},unbind:function(e){e=e.toLowerCase();var t,i=s[e],r=arguments[1];if(i){if(r!==n){for(t=i.length-1;t>=0;t--)if(i[t].func===r){i.splice(t,1);break}}else i=[];i.length||delete s[e]}},unbindAll:function(){var e=this;p.each(s,function(t,n){e.unbind(n)})},destroy:function(){this.trigger("Destroy"),this.unbindAll()}})},p.File=function(e,t,n){var i=this;i.id=e,i.name=t,i.size=n,i.loaded=0,i.percent=0,i.status=0},p.Runtime=function(){this.getFeatures=function(){},this.init=function(){}},p.QueueProgress=function(){var e=this;e.size=0,e.loaded=0,e.uploaded=0,e.failed=0,e.queued=0,e.percent=0,e.bytesPerSec=0,e.reset=function(){e.size=e.loaded=e.uploaded=e.failed=e.queued=e.percent=e.bytesPerSec=0}},p.runtimes={},window.plupload=p})();