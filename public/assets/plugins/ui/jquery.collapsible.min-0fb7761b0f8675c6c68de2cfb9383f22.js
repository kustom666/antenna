/**
 * Collapsible, jQuery Plugin
 * 
 * This plugin enables the management of 
 * collapsibles on the page with cookie support.
 * 
 * Copyright (c) 2010 John Snyder (snyderplace.com)
 * @license http://www.snyderplace.com/collapsible/license.txt New BSD
 * @version 1.1
 */
(function(e){function n(n,o){var c=e.extend({},e.fn.collapsible.defaults,o),t=new Array;return n.each(function(){var n=e(this);i(n,c),"mouseenter"==c.bind&&n.bind("mouseenter",function(e){e.preventDefault(),a(n,c)}),"mouseover"==c.bind&&n.bind("mouseover",function(e){e.preventDefault(),a(n,c)}),"click"==c.bind&&n.bind("click",function(e){e.preventDefault(),a(n,c)}),"dblclick"==c.bind&&n.bind("dblclick",function(e){e.preventDefault(),a(n,c)}),id=n.attr("id"),d(c)?f(c)?(cookieIndex=p(id,c),cookieIndex===!1?(n.addClass(c.cssClose),n.next().hide()):(n.addClass(c.cssOpen),n.next().show(),t.push(id))):(dOpenIndex=k(id,c),dOpenIndex===!1?(n.addClass(c.cssClose),n.next().hide()):(n.addClass(c.cssOpen),n.next().show(),t.push(id))):(dOpenIndex=k(id,c),dOpenIndex===!1?(n.addClass(c.cssClose),n.next().hide()):(n.addClass(c.cssOpen),n.next().show(),t.push(id)))}),t.length>0&&d(c)?u(t.toString(),c):u("",c),n}function o(e){return e.data("collapsible-opts")}function i(e,n){return e.data("collapsible-opts",n)}function c(e,n){return e.hasClass(n.cssClose)}function t(e,n){e.addClass(n.cssClose).removeClass(n.cssOpen),n.animateOpen(e,n),d(n)&&(id=e.attr("id"),r(id,n))}function s(e,n){e.removeClass(n.cssClose).addClass(n.cssOpen),n.animateClose(e,n),d(n)&&(id=e.attr("id"),l(id,n))}function a(e,n){return c(e,n)?s(e,n):t(e,n),!1}function d(n){return e.cookie&&""!=n.cookieName?!0:!1}function l(n,o){return d(o)?f(o)?p(n,o)?!0:(cookie=e.cookie(o.cookieName),cookie=unescape(cookie),cookieArray=cookie.split(","),cookieArray.push(n),u(cookieArray.toString(),o),!0):(u(n,o),!0):!1}function r(n,o){return d(o)?f(o)?(cookieIndex=p(n,o),cookieIndex===!1?!0:(cookie=e.cookie(o.cookieName),cookie=unescape(cookie),cookieArray=cookie.split(","),cookieArray.splice(cookieIndex,1),u(cookieArray.toString(),o),void 0)):!0:!1}function u(n,o){return d(o)?(e.cookie(o.cookieName,n,o.cookieOptions),void 0):!1}function p(n,o){return d(o)?f(o)?(cookie=unescape(e.cookie(o.cookieName)),cookieArray=cookie.split(","),cookieIndex=e.inArray(n,cookieArray),-1==cookieIndex?!1:cookieIndex):!1:!1}function f(n){return d(n)?null==e.cookie(n.cookieName)?!1:!0:!1}function k(n,o){return defaultOpen=x(o),index=e.inArray(n,defaultOpen),-1==index?!1:index}function x(e){return defaultOpen=new Array,""!=e.defaultOpen&&(defaultOpen=e.defaultOpen.split(",")),defaultOpen}e.fn.collapsible=function(n,o){return"string"==typeof n?e.fn.collapsible.dispatcher[n](this,o):e.fn.collapsible.dispatcher._create(this,n)},e.fn.collapsible.dispatcher={_create:function(e,o){n(e,o)},toggle:function(e){return a(e,o(e)),e},open:function(e){return s(e,o(e)),e},close:function(e){return t(e,o(e)),e},collapsed:function(e){return c(e,o(e))}},e.fn.collapsible.defaults={cssClose:"collapse-close",cssOpen:"collapse-open",cookieName:"collapsible",cookieOptions:{path:"/",expires:7,domain:"",secure:""},defaultOpen:"",speed:"slow",bind:"click",animateOpen:function(e,n){e.next().slideUp(n.speed)},animateClose:function(e,n){e.next().slideDown(n.speed)}}})(jQuery);